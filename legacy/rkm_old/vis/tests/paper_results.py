
import numpy as np
import pandas as pd

def main(precision=3, verbose=0):
    in_file = '/Users/kun/Downloads/rkm/20230312/Case4_R_1000_None_NONE_ACD_-1th.png.csv'
    ps = [0.05, 0.1, 0.2, 0.35, 0.49]
    df = pd.read_csv(in_file)

    py_names = [
        'kmeans',
        'kmedian_l1',
        'kmedian',  # our method
        # # 'kmedian_tukey',
        'my_spectralclustering',
    ]
    for metric in ['ACD', 'n_ths']:
        print(f'\n***{metric}, {in_file}, {ps}')
        for i, alg_name in enumerate(py_names):
            mask = (df['alg_name'] == alg_name)
            alg_df = df[mask]
            line = [alg_name]
            p_line = ['alg_name']
            for p in ps:
                # col = f'{p}:ACD(mu+/-std, ACDs)'
                # col = f'{p}:n_ths(mu+/-std, n_ths)'
                if metric == 'ACD':
                    col = f'{p}:{metric}(mu+/-std, {metric}s)'
                else:
                    col = f'{p}:{metric}(mu+/-std, {metric})'   # number of iteration for each experimental setting.
                _df = alg_df.loc[:, col].apply(lambda lst:float(lst.split(',')[0][1:]))
                if verbose >=5 :
                    print(_df)
                _mu = np.mean(_df)
                _std = np.std(_df)
                line.append(f'{_mu:.{precision}f}+/-{_std:.{precision}f}')
                p_line.append(str(p))
            line = ',  '.join(line)
            p_line = ',  '.join(p_line)
            if i==0:
                print(p_line)

            print(line)

if __name__ == '__main__':
    main()

#
# kmeans	3GAUSSIANS	kmeans++
# SEED_0	[0.08005661489420576, 0.0, [0.08005661489420576]]	[12.0, 0.0, [12]]
# [[-1.0, 0.0], [1.0, 0.0]]
# [[-1.2069036761639718, 0.8801789120807822], [0.1603675528268086, -1.3682450953383907]]
# [[-1.1189095212544393, -0.018013323929661557], [1.3814677175206398, 0.0114741533042755]]
# SEED_0	[0.22015549064218834, 0.0, [0.22015549064218834]]	[11.0, 0.0, [11]]
# [[-1.0, 0.0], [1.0, 0.0]]
# [[0.1603675528268086, -1.3682450953383907], [1.4595849048340561, 0.28005786003768013]]
# [[-1.0207389604725543, -0.024059781258032854], [1.6624774464450882, 0.020630964114782047]]
# SEED_0	[0.46231631765454556, 0.0, [0.46231631765454556]]	[18.0, 0.0, [18]]
# [[-1.0, 0.0], [1.0, 0.0]]
# [[0.1603675528268086, -1.3682450953383907], [5.555114032059068, 0.6133262263287012]]
# [[-0.9374256212908134, -0.03707752775580298], [1.957964854386585, 0.040566946321567245]]
# SEED_0	[0.9595083668532202, 0.0, [0.9595083668532202]]	[23.0, 0.0, [23]]
# [[-1.0, 0.0], [1.0, 0.0]]
# [[0.1603675528268086, -1.3682450953383907], [5.501799753807639, -0.0560994733409029]]
# [[-0.8047505963215786, -0.024957038544006147], [2.370862772643947, 0.03173025174379597]]
# SEED_0	[10.134808507432236, 0.0, [10.134808507432236]]	[11.0, 0.0, [11]]
# [[-1.0, 0.0], [1.0, 0.0]]
# [[0.1603675528268086, -1.3682450953383907], [5.984994912968635, -0.11341163064273396]]
# [[-0.08622037792481123, -0.014327743514711751], [5.407549968524379, 0.08900453848605586]]
#
# 1	kmeans	3GAUSSIANS	kmeans++	SEED_1000	[0.11787190951028739, 0.0, [0.11787190951028739]]	[16.0, 0.0, [16]]	[[-1.0, 0.0], [1.0, 0.0]]	[[-1.2167987792912356, 0.44839005229324763], [2.8600755461054987, -3.8150955530272483]]	[[-1.040717337366362, 0.022187438683945397], [1.482205034521561, -0.03274049029985681]]	SEED_1000	[0.30599968171961356, 0.0, [0.30599968171961356]]	[16.0, 0.0, [16]]	[[-1.0, 0.0], [1.0, 0.0]]	[[-0.7808526315623181, -0.4303070703013708], [2.8600755461054987, -3.8150955530272483]]	[[-0.9420679873736675, 0.010900598344896137], [1.7797287817128853, -0.023397633994754086]]	SEED_1000	[0.825399150101204, 0.0, [0.825399150101204]]	[15.0, 0.0, [15]]	[[-1.0, 0.0], [1.0, 0.0]]	[[-1.2167987792912356, 0.44839005229324763], [2.8600755461054987, -3.8150955530272483]]	[[-0.7591542271868702, 0.011483840646661407], [2.261618519496792, -0.03128013086895237]]	SEED_1000	[1.6483302412581942, 0.0, [1.6483302412581942]]	[19.0, 0.0, [19]]	[[-1.0, 0.0], [1.0, 0.0]]	[[-1.365872592611314, 0.7367428790685242], [2.8600755461054987, -3.8150955530272483]]	[[-0.6281664715052121, 0.00652390811873485], [2.7769588849334945, -0.02783647754788755]]	SEED_1000	[10.038693012662867, 0.0, [10.038693012662867]]	[15.0, 0.0, [15]]	[[-1.0, 0.0], [1.0, 0.0]]	[[0.9602581411127551, 1.3719084471647527], [2.8600755461054987, -3.8150955530272483]]	[[-0.08906843014955645, -0.01593076092879999], [5.386371758085781, 0.08413507650928775]]
# 0